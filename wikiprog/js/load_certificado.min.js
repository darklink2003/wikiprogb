document.addEventListener("DOMContentLoaded",(function(){function e(e,n){const o=document.getElementById("certificate-container");let t=`Nota obtenida: ${e.nota}`,c="black",a="";e.nota<70?(t="Certificado no aprobado",c="red",a='<img src="../css/img/noaprovado.png" alt="Certificado No Aprobado" width="300px">'):a='<img src="../css/img/aprovado.png" alt="Certificado Aprobado" width="300px">';const i=document.createElement("div");i.innerHTML=`\n            <div id="certificado-${n}" class="certificate" style="color: ${c}; display:flex;">\n                <div class="col-md-4" style="text-align: center;">\n                    ${a}\n                </div>\n                <div class="col-md-4">\n                    <h1 class="mb-4">Certificado de aprobación</h1>\n                    <p>${t}</p>\n                    <h2>${e.nombre}</h2>\n                    <p>ha sido reconocido con el presente certificado por su participación en el curso de ${e.titulo_curso}</p>\n                    <p class="award">¡Felicidades!</p>\n                </div>\n            </div>\n            <button id="downloadButton-${n}" class="btn btn-primary">Descargar Certificado</button>\n        `,o.appendChild(i),document.getElementById(`downloadButton-${n}`).addEventListener("click",(function(){!function(e){const n=document.getElementById(`certificado-${e}`);html2canvas(n).then((n=>{const o=n.toDataURL("image/png"),t=new jsPDF;t.addImage(o,"PNG",0,0),t.save(`certificado-${e}.pdf`)}))}(n)}))}!function(n){n?axios.get(`../model/get_inscripcion.php?usuario_id=${n}`).then((function(n){n.data&&n.data.length>0?n.data.forEach(((n,o)=>{e({nota:n.nota,nombre:n.nombre,titulo_curso:n.titulo_curso},o)})):(console.error("No se encontró información del certificado."),document.getElementById("certificate-container").innerText="No se encontró información del certificado.")})).catch((function(e){console.error("Error al cargar el certificado:",e);const n=document.getElementById("certificate-container");n.innerHTML="";const o=document.createElement("p");o.textContent="Hubo un error al cargar el certificado. Por favor, intenta nuevamente más tarde.",n.appendChild(o)})):console.error("No se proporcionó un usuario_id válido.")}(new URLSearchParams(window.location.search).get("usuario_id"))}));