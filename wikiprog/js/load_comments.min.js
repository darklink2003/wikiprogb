document.addEventListener("DOMContentLoaded",(()=>{const e=new URLSearchParams(window.location.search);!async function e(o){try{console.log("Cargando comentarios para cursoId:",o);const n=await axios.get(`../model/get_comments.php?curso_id=${o}`);console.log("Datos recibidos:",n.data);const t=document.getElementById("comentario-container");t.innerHTML="",Array.isArray(n.data)?n.data.forEach((n=>{const a=document.createElement("div");a.className="col-lg-12 col-md-12 col-sm-12 mb-12";const r=document.createElement("div");r.className="comentario-container border rounded";const c=document.createElement("h5");c.textContent=n.nombre_usuario;const s=document.createElement("p");s.textContent=`Fecha: ${n.fecha_registro} (${n.tiempo_transcurrido})`;const i=document.createElement("p");i.textContent=n.comentario;const d=document.createElement("button");d.textContent="Eliminar",d.className="btn btn-danger",d.addEventListener("click",(async()=>{confirm("¿Estás seguro de que deseas eliminar este comentario?")&&(await async function(e){try{const o=await axios.post("../model/delete_comment.php",{id:e});o.data.success?console.log(`Comentario con ID ${e} eliminado exitosamente.`):console.error(`Error al eliminar el comentario con ID ${e}:`,o.data.message)}catch(e){console.error("Error al eliminar el comentario:",e)}}(n.comentario_id),e(o))})),r.appendChild(c),r.appendChild(s),r.appendChild(i),r.appendChild(d),a.appendChild(r),t.appendChild(a)})):console.log("La respuesta no contiene un array válido de comentarios.")}catch(e){console.error("Error al cargar los comentarios:",e);document.getElementById("comentario-container").innerHTML="<p>Error al cargar los comentarios. Inténtalo de nuevo más tarde.</p>"}}(parseInt(e.get("curso_id"))||1)}));